{
    "before_functions": "public function findAndMarkAsRead(int $id, ?int $recipientId = null): Notification\n{\n    $this->beginTransaction();\n    $notification = $this->find($id);\n\n    if ($recipientId && $recipientId == $notification->getRecipient()->getId()) {\n        $notification->setRead(true);\n        $notification->save();\n        $this->commit();\n    }\n\n    return $notification;\n}\n",
    "after_functions": "public function findAndMarkAsRead(int $id, ?int $recipientId = null): Notification\n{\n    $this->beginTransaction();\n    $notification = $this->find($id);\n\n    if($notification->getRecipient()->getId() != $recipientId) {\n        throw new AccessDeniedHttpException();\n    }\n\n    if ($recipientId && $recipientId == $notification->getRecipient()->getId()) {\n        $notification->setRead(true);\n        $notification->save();\n        $this->commit();\n    }\n\n    return $notification;\n}\n"
}